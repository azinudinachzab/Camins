function CKEditorUpdate(){for(instance in CKEDITOR.instances)CKEDITOR.instances[instance].updateElement()}!function(a){a.fn.simpleAjax=function(b){var c={browserLoaderColor:"#07a975"},d=this,e={},f=a.extend(c,b);d.ajaxForm=function(){this.on("submit","form[ajax-callback]",function(b){b.preventDefault();var c=a(this),f=g(c),h=f.element,n=f.names,s=f.val;l(c),$callbackFunction=i(c),e.type=o(c),e.url=c.attr("action"),e.dataType=m(c),e.cache=q(c),e.async=r(c),e.processData=p(c);var t=j(c),u=!1;return 1==t?(u=new FormData(this),u.append(n,s),e.contentType=!1):(u=c.serialize(),u+="&"+n+"="+s,e.contentType=k(c)),e.data=u,d.call_ajax(e,h,$callbackFunction),!1})},d.ajaxLink=function(){this.on("click","a[ajax-callback]",function(b){if(b.preventDefault(),a(b.target).is("a[disabled]"))return!1;var c=a(this);c.attr("disabled",!0);var f=i(c);return e.url=c.attr("href"),e.type=o(c),e.dataType=m(c),e.data=n(c),e.cache=q(c),e.async=r(c),e.contentType=k(c),e.processData=p(c),d.call_ajax(e,c,f),!1})};var g=function(a){var b,c,d,e={};return b=a.find("input[type=submit]:focus, button[type=submit]:focus"),b.prop("disabled",!0),a.attr("ajax-loader")&&(d=a.attr("ajax-loader"),b.attr("ajax-loader",d)),b.val()?c=b.val():b.html()&&(c=b.html()),e.element=b,e.names=b.attr("name"),e.val=c,e};d.click=function(b){b&&(b.is("input")?b.removeAttr("disabled"):0==b.children(".simpleAjax-clicked-loader").length?b.removeAttr("disabled"):b.children(".simpleAjax-clicked-loader").fadeOut(function(){b.removeAttr("disabled"),b.children(".simpleAjax-clicked-loader").remove(),1==a(".simpleAjax-browser-loader").length&&"100%"==a(".simpleAjax-browser-loader")[0].style.width&&a(".simpleAjax-browser-loader").remove()}))},d.handler=function(a,b){e={},1==a.ajaxStatus&&b.success?b.success():0==a.ajaxStatus&&b.error?b.error():"progress"==a.ajaxStatus&&b.progress?b.progress():"beforeSend"==a.ajaxStatus&&b.beforeSend&&b.beforeSend()};var h=function(a,b){if($response={},a.lengthComputable){var c=a.loaded||a.position,d=a.total;percent=Math.ceil(c/d*100),$response.progress=b,$response.percent=percent}else $response.progress=!1;return $response},i=function(a){var b="";if(a.attr("ajax-callback")){var b=window[a.attr("ajax-callback")];return b}return!1},j=function(a){var b=a.attr("ajax-upload");return"true"==b},k=function(a){return 0==a||"default"==a?"application/x-www-form-urlencoded; charset=UTF-8":a.attr("ajax-contentType")?a.attr("ajax-contentType"):void 0},l=function(a){return a.attr("ajax-ckeditor")&&CKEditorUpdate(),!1},m=function(a){var b="json";return a.attr("ajax-dataType")&&(b=a.attr("ajax-dataType")),b},n=function(a){var b="";return a.attr("ajax-data")&&(b=a.attr("ajax-data")),b},o=function(a){var b="get";return a.attr("ajax-method")?b=a.attr("ajax-method"):a.attr("method")&&(b=a.attr("method")),b},p=function(a){var b=!1;return a.attr("ajax-processData")&&(b=a.attr("ajax-processData")),b},q=function(a){var b=!1;return a.attr("ajax-cache")&&(b=a.attr("ajax-cache")),b},r=function(a){var b=!0;return a.attr("ajax-async")&&(b=a.attr("ajax-async")),b},s=function(a){if(a.attr("ajax-loader")){var b=a.attr("ajax-loader");if(b&&"false"!=b)return 0==a.children(".simpleAjax-clicked-loader").length&&a.append("<span class='simpleAjax-clicked-loader'></span>"),!0}return!1},t=function(b,c){var d=c.attr("ajax-loader"),e=d.split(" ");return a.inArray(b,e)!=-1},u=function(b,c){t("circle",c)&&0==c.children(".simpleAjax-clicked-loader").children(".simpleAjax-circle-animation").length&&c.children(".simpleAjax-clicked-loader").append("<div class='simpleAjax-circle-animation'><div></div></div>"),t("browser",c)&&0==a("body").children(".simpleAjax-browser-loader").length&&a("body").append("<div class='simpleAjax-browser-loader'></div>"),t("percent",c)&&0==c.children(".simpleAjax-clicked-loader").children(".simpleAjax-percent-loader").length&&c.children(".simpleAjax-clicked-loader").append("<div class='simpleAjax-percent-loader' style='display:inline-block;'><span class='simpleAjax-percent-text'>0</span> %</div>"),v(b,c)};d.create_circle_percent=function(b){var c={size:70,loaderSize:5,fontSize:15,fontColor:"black",background:"#e7fcff",loaderColor:"#d0f9ff",loaderWalk:"#59cdde",loaderText:"percent",ajaxAttribute:!1,loaderLink:!1,maxDegree:360},d=a.extend(c,b),e=a(d.element);e.attr("maxDegree",d.maxDegree),e.attr("loaderColor",d.loaderColor),e.attr("loaderWalk",d.loaderWalk),e.addClass("simpleAjax-circle-percent-loader-active");var f="<span class='simpleAjax-circle-percent-text' style='visibility: hidden;'></span>";if(0==d.loaderLink)e.html("<div class='simpleAjax-circle-percent-loader'>"+f+"</div>");else{var g="";0!=d.ajaxAttribute&&(g=d.ajaxAttribute),e.html("<a class='simpleAjax-circle-percent-loader' href='"+d.loaderLink+"' "+g+">"+f+"</a>")}var h=e.children(".simpleAjax-circle-percent-loader").children(".simpleAjax-circle-percent-text");"percent"==d.loaderText||1==d.loaderText?(h.attr("percentText","percent"),h.html("0%")):0!=d.loaderText&&(h.attr("percentText","text"),h.html(d.loaderText)),h.css({"font-size":d.fontSize,color:d.fontColor});var i=d.size+2*d.loaderSize;e.css({width:i,height:i,background:d.loaderColor,"background-image":"linear-gradient(90deg, transparent 50%, "+d.loaderColor+" 50%),linear-gradient(90deg,  "+d.loaderColor+" 50%, transparent 50%)"}),e.children(".simpleAjax-circle-percent-loader").css({width:d.size,height:d.size,top:c.loaderSize,left:c.loaderSize,background:d.background}),""!=h.html()&&h.css({visibility:"visible"})},d.walk_circle_percent=function(b){var c,d=a(b.element),e=d.children(".simpleAjax-circle-percent-loader"),f=d.attr("maxDegree"),g=d.attr("loaderColor"),h=d.attr("loaderWalk"),i=f*b.percent/100;i<0?i=0:i>f&&(i=f),i=Math.round(i);var j=e.children(".simpleAjax-circle-percent-text").attr("percentText");"percent"==j||"true"==j?(c=100*i/f,c=Math.round(c)+"%"):c=e.children(".simpleAjax-circle-percent-text").html(),e.children(".simpleAjax-circle-percent-text").html(c),d.css({background:h}),i<=180?d.css("background-image","linear-gradient("+(90+i)+"deg, transparent 50%, "+g+" 50%),linear-gradient(90deg, "+g+" 50%, transparent 50%)"):d.css("background-image","linear-gradient("+(i-90)+"deg, transparent 50%, "+h+" 50%),linear-gradient(90deg, "+g+" 50%, transparent 50%)")};var v=function(b,c){var d=a(".simpleAjax-browser-loader");1==d.length&&d.css({background:f.browserLoaderColor,width:b+"%"});var e=c.children(".simpleAjax-clicked-loader").children(".simpleAjax-percent-loader").children(".simpleAjax-percent-text");1==e.length&&e.html(b)};return d.call_ajax=function(b,c,d){a.isFunction(window[d])&&(d=window[d]),"undefined"==typeof b.contentType&&(b.contentType=k("default")),"undefined"==typeof b.cache&&(b.cache=!1),"undefined"==typeof b.processData&&(b.processData=!1),"undefined"==typeof b.dataType&&(b.dataType="json"),b.xhr&&delete b.xhr,b.beforeSend=function(a){$data={},$data.event=a,$data.ajaxStatus="beforeSend",$data.clickedTag=c,d($data)},b.success=function(a){$data={},"json"==b.dataType?$data=a:$data[b.dataType]=a,$data.ajaxStatus=!0,$data.clickedTag=c,d($data)},b.error=function(a,b,e){var f={};f.ajaxStatus=!1,f.xhr=a,f.text=b,f.error=e,f.clickedTag=c,d(f)},c&&s(c)&&(b.xhr=function(){var a=new window.XMLHttpRequest;return a.upload.addEventListener("progress",function(a){var b=h(a,"upload");u(b.percent,c),b.clickedTag=c,b.ajaxStatus="progress",d(b)},!1),a.addEventListener("progress",function(a){var b=h(a,"download");u(b.percent,c),b.clickedTag=c,b.ajaxStatus="progress",d(b)},!1),a}),a.ajax(b)},d.initialize=function(){return d.ajaxForm(),d.ajaxLink(),d},d.initialize()}}(jQuery);